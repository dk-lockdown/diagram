<mxfile host="www.draw.io" modified="2019-12-17T07:47:00.885Z" agent="Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_1) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/79.0.3945.79 Safari/537.36" etag="fsFp0iMcNsikTPleVRbs" version="12.4.2" type="github" pages="3">
  <diagram id="hpy9bZ58W7uLl9hxA-Dw" name="BigWheel-Job">
    <mxGraphModel dx="946" dy="570" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="0"/>
        <mxCell id="1" parent="0"/>
        <mxCell id="4gJD-GNuNSzeD2h8oJej-1" value="job" style="swimlane;html=1;childLayout=stackLayout;resizeParent=1;resizeParentMax=0;startSize=20;" parent="1" vertex="1">
          <mxGeometry x="100" y="70" width="370" height="490" as="geometry"/>
        </mxCell>
        <mxCell id="4gJD-GNuNSzeD2h8oJej-2" value="每日0晨发放积分" style="swimlane;html=1;startSize=20;" parent="4gJD-GNuNSzeD2h8oJej-1" vertex="1">
          <mxGeometry y="20" width="190" height="470" as="geometry"/>
        </mxCell>
        <mxCell id="4gJD-GNuNSzeD2h8oJej-8" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="4gJD-GNuNSzeD2h8oJej-2" source="4gJD-GNuNSzeD2h8oJej-6" target="4gJD-GNuNSzeD2h8oJej-7" edge="1">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="4gJD-GNuNSzeD2h8oJej-6" value="获取系统在进行的大转盘活动" style="rounded=0;whiteSpace=wrap;html=1;" parent="4gJD-GNuNSzeD2h8oJej-2" vertex="1">
          <mxGeometry x="50" y="50" width="90" height="30" as="geometry"/>
        </mxCell>
        <mxCell id="4gJD-GNuNSzeD2h8oJej-10" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="4gJD-GNuNSzeD2h8oJej-2" source="4gJD-GNuNSzeD2h8oJej-7" target="4gJD-GNuNSzeD2h8oJej-9" edge="1">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="4gJD-GNuNSzeD2h8oJej-7" value="如果活动设置了每日清零则先清零每位用户的账户" style="rounded=0;whiteSpace=wrap;html=1;" parent="4gJD-GNuNSzeD2h8oJej-2" vertex="1">
          <mxGeometry x="42.5" y="160" width="105" height="40" as="geometry"/>
        </mxCell>
        <mxCell id="4gJD-GNuNSzeD2h8oJej-9" value="&lt;span style=&quot;white-space: normal&quot;&gt;按照抽奖次数发放规则给每位用户发放抽奖次数&lt;/span&gt;" style="rounded=0;whiteSpace=wrap;html=1;" parent="4gJD-GNuNSzeD2h8oJej-2" vertex="1">
          <mxGeometry x="42.5" y="280" width="105" height="40" as="geometry"/>
        </mxCell>
        <mxCell id="4gJD-GNuNSzeD2h8oJej-3" value="奖品发放" style="swimlane;html=1;startSize=20;" parent="4gJD-GNuNSzeD2h8oJej-1" vertex="1">
          <mxGeometry x="190" y="20" width="180" height="470" as="geometry"/>
        </mxCell>
        <mxCell id="4gJD-GNuNSzeD2h8oJej-13" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="4gJD-GNuNSzeD2h8oJej-3" source="4gJD-GNuNSzeD2h8oJej-11" target="4gJD-GNuNSzeD2h8oJej-12" edge="1">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="4gJD-GNuNSzeD2h8oJej-11" value="从中奖记录表luckydrawrecord中获取发奖状态AwardStatus为0即未发奖的中奖记录" style="rounded=0;whiteSpace=wrap;html=1;" parent="4gJD-GNuNSzeD2h8oJej-3" vertex="1">
          <mxGeometry x="40" y="50" width="120" height="60" as="geometry"/>
        </mxCell>
        <mxCell id="4gJD-GNuNSzeD2h8oJej-15" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="4gJD-GNuNSzeD2h8oJej-3" source="4gJD-GNuNSzeD2h8oJej-12" target="4gJD-GNuNSzeD2h8oJej-14" edge="1">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="4gJD-GNuNSzeD2h8oJej-12" value="如果奖项类型为积分，则给用户赠送积分" style="rounded=0;whiteSpace=wrap;html=1;" parent="4gJD-GNuNSzeD2h8oJej-3" vertex="1">
          <mxGeometry x="50" y="160" width="100" height="40" as="geometry"/>
        </mxCell>
        <mxCell id="4gJD-GNuNSzeD2h8oJej-14" value="如果奖项类型为优惠券，则给用户赠送优惠券" style="rounded=0;whiteSpace=wrap;html=1;" parent="4gJD-GNuNSzeD2h8oJej-3" vertex="1">
          <mxGeometry x="45" y="280" width="110" height="40" as="geometry"/>
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
  <diagram id="5AOF5QHrAvGV-4yW5uYb" name="BigWheel-抽奖">
    <mxGraphModel dx="946" dy="570" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="Jt7EDk8Jf0SjCcPzJfZv-0"/>
        <mxCell id="Jt7EDk8Jf0SjCcPzJfZv-1" parent="Jt7EDk8Jf0SjCcPzJfZv-0"/>
        <mxCell id="N66UEKQcvrAVynlwN7qd-0" value="Pool" style="swimlane;html=1;childLayout=stackLayout;resizeParent=1;resizeParentMax=0;startSize=20;" parent="Jt7EDk8Jf0SjCcPzJfZv-1" vertex="1">
          <mxGeometry x="200" y="70" width="280" height="1180" as="geometry"/>
        </mxCell>
        <mxCell id="N66UEKQcvrAVynlwN7qd-1" value="抽奖" style="swimlane;html=1;startSize=20;" parent="N66UEKQcvrAVynlwN7qd-0" vertex="1">
          <mxGeometry y="20" width="280" height="1160" as="geometry"/>
        </mxCell>
        <mxCell id="yVeMU9E1oosOEePWJoE1-13" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="N66UEKQcvrAVynlwN7qd-1" source="16QB4iwVR4vW0TDglzFY-1" target="yVeMU9E1oosOEePWJoE1-0">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="16QB4iwVR4vW0TDglzFY-1" value="根据编号查询大转盘活动" style="rounded=0;whiteSpace=wrap;html=1;" parent="N66UEKQcvrAVynlwN7qd-1" vertex="1">
          <mxGeometry x="85" y="220" width="120" height="50" as="geometry"/>
        </mxCell>
        <mxCell id="yVeMU9E1oosOEePWJoE1-19" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="N66UEKQcvrAVynlwN7qd-1" source="yVeMU9E1oosOEePWJoE1-0" target="yVeMU9E1oosOEePWJoE1-18">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="yVeMU9E1oosOEePWJoE1-0" value="查询当日奖品记录表&lt;br&gt;awardeachday" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="N66UEKQcvrAVynlwN7qd-1">
          <mxGeometry x="85" y="340" width="120" height="50" as="geometry"/>
        </mxCell>
        <mxCell id="yVeMU9E1oosOEePWJoE1-17" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="N66UEKQcvrAVynlwN7qd-1" source="yVeMU9E1oosOEePWJoE1-2" target="yVeMU9E1oosOEePWJoE1-6">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="yVeMU9E1oosOEePWJoE1-2" value="根据每个奖项剩余计算得奖概率" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="N66UEKQcvrAVynlwN7qd-1">
          <mxGeometry x="85" y="580" width="120" height="50" as="geometry"/>
        </mxCell>
        <mxCell id="yVeMU9E1oosOEePWJoE1-9" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="N66UEKQcvrAVynlwN7qd-1" source="yVeMU9E1oosOEePWJoE1-6" target="yVeMU9E1oosOEePWJoE1-8">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="yVeMU9E1oosOEePWJoE1-6" value="更新用户剩余抽奖次数" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="N66UEKQcvrAVynlwN7qd-1">
          <mxGeometry x="85" y="710" width="120" height="50" as="geometry"/>
        </mxCell>
        <mxCell id="yVeMU9E1oosOEePWJoE1-11" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="N66UEKQcvrAVynlwN7qd-1" source="yVeMU9E1oosOEePWJoE1-8" target="yVeMU9E1oosOEePWJoE1-10">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="yVeMU9E1oosOEePWJoE1-8" value="抽奖" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="N66UEKQcvrAVynlwN7qd-1">
          <mxGeometry x="85" y="840" width="120" height="50" as="geometry"/>
        </mxCell>
        <mxCell id="yVeMU9E1oosOEePWJoE1-10" value="如过未抽到【谢谢参与】，则更新当日奖品剩余记录表" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="N66UEKQcvrAVynlwN7qd-1">
          <mxGeometry x="85" y="970" width="120" height="50" as="geometry"/>
        </mxCell>
        <mxCell id="yVeMU9E1oosOEePWJoE1-5" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="N66UEKQcvrAVynlwN7qd-1" source="yVeMU9E1oosOEePWJoE1-4" target="16QB4iwVR4vW0TDglzFY-1">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="yVeMU9E1oosOEePWJoE1-4" value="检查用户剩余抽奖次数" style="rhombus;whiteSpace=wrap;html=1;" vertex="1" parent="N66UEKQcvrAVynlwN7qd-1">
          <mxGeometry x="105" y="80" width="80" height="80" as="geometry"/>
        </mxCell>
        <mxCell id="yVeMU9E1oosOEePWJoE1-20" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="N66UEKQcvrAVynlwN7qd-1" source="yVeMU9E1oosOEePWJoE1-18" target="yVeMU9E1oosOEePWJoE1-2">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="yVeMU9E1oosOEePWJoE1-18" value="检查用户中奖次数限制，如达到上限，将中奖概率设置为0" style="rhombus;whiteSpace=wrap;html=1;" vertex="1" parent="N66UEKQcvrAVynlwN7qd-1">
          <mxGeometry x="105" y="450" width="80" height="80" as="geometry"/>
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
  <diagram id="NovtTXWVXjk_tk5aumW9" name="BigWheel-创建">
    <mxGraphModel dx="946" dy="570" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="UGRrFTHjEDf2F1H0PXcp-0"/>
        <mxCell id="UGRrFTHjEDf2F1H0PXcp-1" parent="UGRrFTHjEDf2F1H0PXcp-0"/>
        <mxCell id="UGRrFTHjEDf2F1H0PXcp-2" value="Pool" style="swimlane;html=1;childLayout=stackLayout;resizeParent=1;resizeParentMax=0;startSize=20;" vertex="1" parent="UGRrFTHjEDf2F1H0PXcp-1">
          <mxGeometry x="300" y="70" width="230" height="490" as="geometry"/>
        </mxCell>
        <mxCell id="UGRrFTHjEDf2F1H0PXcp-3" value="创建" style="swimlane;html=1;startSize=20;" vertex="1" parent="UGRrFTHjEDf2F1H0PXcp-2">
          <mxGeometry y="20" width="230" height="470" as="geometry"/>
        </mxCell>
        <mxCell id="UGRrFTHjEDf2F1H0PXcp-10" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="UGRrFTHjEDf2F1H0PXcp-3" source="UGRrFTHjEDf2F1H0PXcp-8" target="UGRrFTHjEDf2F1H0PXcp-9">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="UGRrFTHjEDf2F1H0PXcp-8" value="创建大转盘主表" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="UGRrFTHjEDf2F1H0PXcp-3">
          <mxGeometry x="55" y="60" width="120" height="60" as="geometry"/>
        </mxCell>
        <mxCell id="UGRrFTHjEDf2F1H0PXcp-9" value="计算每个奖项每天的奖品分配数，写入awardeachday&lt;br&gt;每日奖品记录表" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="UGRrFTHjEDf2F1H0PXcp-3">
          <mxGeometry x="55" y="200" width="120" height="60" as="geometry"/>
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
